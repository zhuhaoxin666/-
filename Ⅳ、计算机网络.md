### 一、计算机网络体系结构

+ **计算机网路的各层及其协议的集合，称为网络的体系结构**

+ **OSI**
  + 网络协议:为进行网络中的数据交换而建立的规则、标准或约定。
    + 语法：数据与控制信息的结构或格式
    + 语义：需要发出何种控制信息，完成何种动作以及做出何种响应。
    + 同步：即事件实现顺序的详细说明
  + 各层通常需要具备的功能
    + 差错控制
    + 流量控制
    + 分段和重装
    + 复用和分用
    + 连接的建立和释放
  + OSI七层
    + 应用层
      + 为应用程序提供服务
        + DNS
        + HTTP
        + SMTP
        + 交换的数据单元：报文
    + 表示层
      + 数据格式转化，数据加密
    + 会话层
      + 建立、管理和维护服务
    + 传输层
      + 建立、管理和维护端到端的连接
        + TCP
          + 交换的数据报文：报文段
        + UDP
          + 交换的数据报文：用户数据报
    + 网络层
      + IP选址机路由选择
    + 数据链路层
      + 提供介质访问和链路管理
    + 物理层
  + TCP/IP四层体系结构
    + 应用层
    + 传输层
    + 网际层IP
    + 网络接口层
  + 五层协议
    + 应用层
    + 传输层
    + 网络层
    + 数据链路层
    + 物理层
  + 路由器工作在下三层
    + 网络层
    + 数据链路层
    + 物理层
  + 协议是水平的，服务是垂直的



### 二、物理层

+ **主要任务：描述为确定与传输媒体的接口有关的一些特性**
  + **机械特性**
  + **电器特性**
  + **功能特性**
  + **过程特性**
+ 基本通信知识
  + 调制器
    + 基带调制：数字信号转为另一种数字信号，又称为编码
    + 带通调制：基带信号转为模拟信号
  + 信道
    + 单向通信：又称为单工通信
    + 双向交替通信：半双工通信
    + 双向同时通信：全双工通信
  + 常用编码方式
    + 不归零制
    + 归零制
    + 曼彻斯特编码
    + 差分曼彻斯特
  + 基本的带通调制方法
    + 调幅
    + 调频
    + 调相
  + 信道的极限容量
    + 奈式准则
      + 在任何信道中，码元传输的速率是有上限的，传输速率超过此上限，就会出现严重的码间串扰问题，使接收端对码元的识别称为不可能
    + 信噪比：信号的平均功率S 和噪声的平均功率N 之比
      + 信噪比 = 10 lg （S/N）  （dB）
    + 香农公式
      + 信道的极限信息传输速率C = W log（1+S/N）
      + W为信道的带宽(Hz)
      + 香农公式表明：信息的带宽或信道中的信噪比越大，信息的极限传输速率就越高。
  + 传输媒体：
    + 导引型传输媒体
      + 双绞线：最常用
      + 同轴电缆
      + 光缆
    + 非导引型传输媒体
      + 短波通信
      + 无线电微波通信
        + 地面微波接力通信
        + 卫星通信
  + **信道复用**
    + 频分复用：所有用户在同样的时间占用不同的带宽资源
    + 时分复用：所有用户在不同的时间占用同样的频带宽度
    + 波分复用：光的频分复用
    + 码分复用(CDM)
      + 码分多址CDMA：每个用户可以在同样的时间使用同样的频带进行通信，**由于各用户使用经过特殊挑选的不同码型，因此各用户之间不会造成干扰**



### 三、数据链路层

+ 数据链路层信道：

  + 点对点信道
  + 广播信道

+ 局域网仍然属于数据链路层的范围（不仅过路由器转发）

+ **使用点对点信道的数据链路层**

  + 协议数据单元：**帧**

  + 三个基本问题

    + **封装成帧**
      + 给IP数据报加上首部和尾部
      + 一个帧的帧长等于帧的数据部分长度加上帧首部和帧尾部的长度
      + 为了提高帧的传输效率，应该使帧的数据部分长度尽可能的大于首尾部长度，数据部分长度上限为**MTU**
      + 帧定界符：8个比特
        + 帧开始符：SOH
        + 帧结束符：EOT
    + **透明传输**
      + 避免出现在数据传输部分出现SOH或EOT导致数据丢失
      + 解决办法
        + 字节填充：
        + 在数据中可能出现SOH和EOT的地方前面加上ESC转义符
    + **差错检验**
      + 循环冗余检验CRC

  + **PPP协议**

    + PPP帧

      + > 首部                                 I P数据报                             尾部
        >
        > F   | A   | C  | 协议  |        信息部分                         |  FCS | F
        >
        > 7E | FF | 03                                                                | 7E

      + 信息部分不超过1500字节

    + 字节填充

      + 信息字段中出现的每一个0x7E转变成为2字节序列 0x7D，0x5E
      + 信息字段中出现一个0x7D，则变成0x7D，0x5D
      + ASCII码控制字符前面加上0x7D

    + 零比特填充

      + 避免信息部分的8个比特位被误认为成F
        + 01111110
        + 只要连续出现5个1就立即填入一个0

  + 使用广播信道的数据链路层

    + 局域网的数据链路层
      + 星型网
      + 环型网
      + 总线网
    + 共享信道
      + 静态划分信道（频分时分波分复用）
      + 动态媒体接入
        + 随机接入
        + 受控接入（轮询）
    + 适配器的作用
      + 进行数据串行和并行传输的转换（从计算机总线到通信线路传输速率不一致）
      + 数据转换的缓存
      + 实现以太网

  + **CSMA/CD协议**

    + 以太网采取了以下两种措施实现通信的简便
      + 无连接
        + 尽最大努力交付，不可靠的交付
      + 使用曼彻斯特编码
    + **CSMA/CD要点**
      + **多点接入**
        + 计算机以多点接入的方式连接在一根总线上
      + **载波监听**
        + 不管在发送前，还是在发送中，每个站都必须不停的检测信道
      + **碰撞检测**
        + 边发送边监听，一旦出现碰撞。其适配器就立即停止发送，等待一段随机时间后再次发送
    + **集线器**
      + 工作在物理层，不进行碰撞检测
      + 就像一个多接口的转发器
      + 可以对波形进行整形与放大

  + **以太网的MAC层**

    + 48bit
    + 有效MAC帧长度：64-1518字节之间，其中首尾部占18个字节

  + **拓展以太网**

    + 物理层拓展以太网
      + 使用光纤
      + 转发器（工作在物理层）
    + 数据链路层扩展以太网
      + 网桥：对收到的帧根据其MAC帧的目的地址进行转发和过滤
      + 交换机：淘汰网桥，工作在数据链路层
        + 实质：多接口网桥
        + 全双工，并行
        + 具有存储器
    + 总线以太网到星型以太网

  + 虚拟以太网VLAN

    + 使用以太网交换机虚拟多个子局域网

  + 高速以太网



### 四、网络层

